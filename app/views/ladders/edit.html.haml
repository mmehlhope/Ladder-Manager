- content_for(:title, "Ladder Management")

%section.main
  %header.clearfix
    .section-title
      %h1= yield(:title)
      %dl
        %dt
          Ladder:
        %dd
          %a(href="#{ladder_path(@ladder)}" title="Back to #{@ladder.name}")= @ladder.name
        %dt
          Competitors:
        %dd
          = @ladder.competitors.size
    .section-actions
      %a.btn.btn-danger(href="#{ladder_path(@ladder)}" title="Delete ladder" data-method="DELETE" data-confirm="You are about to permanently delete this ladder and all of its competitors. Do you wish to continue?")
        Delete Ladder
  = render 'includes/message' if flash_message? && user_can_admin_ladder
  = render partial: 'includes/validation_errors', locals: {error_messages: @ladder.errors.full_messages} if @ladder.errors.any?
  %section.management-panel
    %ul.navigation.three-across
      %li.active
        %a.btn.btn-link(href="#competitors" data-toggle="tab") Competitors
      %li
        %a.btn.btn-link(href="#matches" data-toggle="tab") Matches
      %li
        %a.btn.btn-link(href="#ladders" data-toggle="tab") Details

    .tab-content

      .tab-pane#competitors.active

      .tab-pane#matches

      .tab-pane#ladders


:coffeescript
  require ['backbone/pages/manage_ladder'], (ManageLadderPage) ->
    ladderEdit = new ManageLadderPage(
      ladder      : #{@ladder_json}
      matches     : #{@matches_json}
      competitors : #{@competitors_json}
    )

